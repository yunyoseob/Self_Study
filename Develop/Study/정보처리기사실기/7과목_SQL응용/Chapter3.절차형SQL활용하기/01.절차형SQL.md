## 정보처리기사 실기

## Chapter03. 절차형 SQL 활용하기

## 01. 절차형 SQL 

<hr>

절차형 SQL은 일반적인 개발 언어처럼 SQL 언어에서도 **절차 지향**적인 프로그램이 가능하도록 하는 **트랜잭션 언어**이다.

**✔ 절차형 SQL 종류**

```
// 프사트

프로시저(Procedure) : 일련의 쿼리들을 마치 하나의 함수처럼 실행하기 위한 쿼리의 집합

사용자 정의함수 : 일련의 SQL 처리를 수행하고, 수행 결과를 단일 값으로 반환 할 수 있는 절차형 SQL

트리거 : 데이터베이스 시스템에서 삽입, 갱신, 삭제 등의 이벤트가 발생할 때마다 관련 작업이 자동으로 수행되는 절차형 SQL
```

**✔ DBMS_OUT_PUT**

메시지를 버퍼에 저장하고 버퍼로부터 메시지를 읽어오기 위한 인터페이스 패키지

**✔ IF문**

```sql
IF 조건 THEN
문장;

ELSIF 조건 THEN
문장;

ELSE
문장;

END IF;
```

**✔ 간단한 CASE문**

여러 개의 선택 경로 중 하나를 취하고자 할 때 사용하는 조건문

- 범위 같은 더 복잡한 매칭을 수행하려면, 검색된(Searched) CASE 문을 사용해야 한다.

```sql
CASE 변수
WHEN 값1 THEN
SET 명령어;

WHEN 값2 THEN
SET 명령어;
...
ELSE
SET 명령어;
END CASE;
```

**✔ 검색된 케이스문**

- 명확한 값 범위를 가지는 조건에 따라 여러 개의 선택 경로 중 하나를 취하고자 할 때 사용하는 조건문이다.


```sql
CASE
WHEN 조건1 THEN SET 명령어;
WHEN 조건2 THEN SET 명령어;
...
ELSE SET 명령어;
END CASE;
```

**✔ 반복문**

반복문이 참일 경우, 수행, 거짓일 경우 탈출

- LOOP문 : 특정 조건이 만족될 때까지 반복해서 문장을 실행하는 반복문이다. EXIT WHEN에 반복문 탈출 조건을 작성한다.

```sql
LOOP
    문장;
EXIT WHEN 탈출조건;
END LOOP
```

- WHILE문 : 시작과 종료 조건을 지정하여 참인 동안에는 해당 문장을 반복해서 실행하는 명령문, 조건이 참(True)일 경우 반복하고, 조건이 거짓이거나 EXIT WHEN 조건이 만족하는 경우 반복문을 빠져나온다.

```sql
WHILE 반복조건 LOOP
문장;
EXIT WHEN 탈출조건;
END LOOP;
```

- FOR LOOP문 : 시작과 끝값을 지정하여 해당 값이 그 구간 내에 있을 때 반복하는 반복문이다.

```sql
FOR 인덱스 IN 시작값 ... 종료값
LOOP
문장;
END LOOP;
```

- 예외부 : 실행중 발생 가능한 예외상황을 수행하는 부분이다.

```sql
EXCEPTION
WHEN 조건 THEN
SET 명령어;
```