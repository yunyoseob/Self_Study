## 정보처리기사 실기

## Chapter02. 물리 데이터 저장소 확인

## 02. 물리 데이터저장소 구성

<hr>

### 참조 무결성 제약 조건

- 릴레이션과 릴레이션 사이에 대한 참조의 일관성을 보장하기 위한 조건

- 두 개의 릴레이션이 기본키, 외래키를 통해 참조 관계를 형성할 경우, 참조하는 외래키의 값은 항상 참조되는 릴레이션에 기본키로 존재해야 함.

**✔ 제한(Restricted)**

참조무결성 원칙을 위배하는 연산을 거절하는 옵션

- 참조되고 있는 값이 있을 경우 삭제가 거절됨.

**✔ 연쇄(Cascade)**

참조되는 릴레이션에서 튜플을 삭제하고, 참조하는 릴레이션에서 이 튜플을 참조하는 튜플들도 함께 삭제되는 옵션

**✔ 널 값(Nullify)**

참조하는 릴레이션에서 튜플을 삭제하고, 참조되는 릴레이션에서 해당 튜플을 참조하는 튜플들의 외래 키에 NULL 값을 넣는 옵션

### 인덱스

**검색 연산의 최적화**를 위해 데이터베이스 내 열에 대한 정보를 구성한 데이터구조

**✔ 인덱스 적용 기준**

인덱스의 정확한 분포도는 **10~15%**


**인덱스 컬럼 선정**
```
분포도가 좋은 컬럼은 단독적으로 생성
- 분포도가 낮은게 좋은 것
- 분포도 = 1/컬럼 값의 종류
- 예시 : 성별의 경우 1/2 = 50%

자주 조합되어 사용되는 컬럼은 결합인덱스로 생성

결합 인덱스는 구성되는 컬럼 순서 선정에 유의

가능한 한 수정이 빈번하지 않는 컬럼을 선정한다. 
- 트리구조라 속도는 빠름 
- 그러나, 트리구조라 수정이 어려움
```

### 뷰 설계 시 고려사항

- 뷰 사용에 따라 수행속도에 문제가 발생할 수 있다.
- 뷰의 조건은 최적의 액세스 경로를 사용할 수 있도록 한다.

### 클러스터 설계 적용 기준

클러스터란 덩어리이다. 

덩어리끼리 모아 놓고 관리하는 단위를 클러스터라고 한다.

1. 클러스터는 인덱스와는 반대로, 분포도가 넓을수록 오히려 유리

2. 엑세스 기법이 아니라 엑세스 효율 향상을 위한 물리적 저장 방법

3. 분포도가 넓은 테이블의 클러스터링은 저장 공간이 절약이 가능

4. 대량의 범위를 자주 액세스 하는 경우 사용

5. 인덱스를 사용한 처리 부담이 되는 넓은 분포도에 활용

6. 여러 개의 테이블이 빈번하게 조인을 일으킬 때 활용

- 인덱스를 걸어서, 20번의 분개를 한다고 할 때, 200만 건 데이터 중 100만 건의 데이터가 남성이라고 하면, 2000만 번 계산을 하게 된다.

- 클러스터를 만들어서 성별 덩어리를 만들어주는 것이 훨씬 효율적

**✔ 클러스터 설계 시 고려사항**

검색 효율은 높여주나 입력, 수정, 삭제 시에 부하가 증가함.

UNION, DISTINCT, ORDER BY, GROUP BY가 빈번한 컬럼이면 검토 대상


### 파티셔닝

대용량의 테이블을 파티션이라는 작은 논리적인 단위로 나누어 성능 저하 방지 및 관리를 상대적으로 보다 용이하게 하고자 하는 기법

**✔ 파티셔닝 유형**

```
// 레해리컴라

레인지 파티셔닝 / 해시 파티셔닝 / 리스트 파티셔닝 / 컴포지트 파티셔닝 / 라운드로빈 파티셔닝
```

- 파티션 vs 파티셔닝 : 파티션 기법이 파티셔닝

**✔ 레인지 파티셔닝(Range Partitioning)**

연속적인 숫자나 날짜를 기준으로 하는 파티셔닝 기법

**✔ 해시 파티셔닝(Hash Partitioning)**

파티션 키의 해시 함수 값에 의한 파티셔닝 기법

**✔ 리스트 파티셔닝(List Partitioning)**

특정 파티션에 저장 될 데이터에 대한 명시적 제어가 가능한 파티셔닝 기법

**✔ 컴포지트 파티셔닝(Composite Partitioning)**

범위분할 이후 해시 함수를 적용하여 재불할 하는 파티셔닝 기법